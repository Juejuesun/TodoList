<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="demo.css">
    <title>login</title>
</head>
<body>
    <header>
        <div class="log">注册中心</div>
    </header>
    <main>
        <div class="pti">
            <div class="post" style="align-self: center;">邮箱：<input id="email">
                <span style="font-size: 15px; color: rgba(0, 0, 0, 0.52);">
                    请按回车
                </span>
            </div> 
            <div class="post" style="align-self: center;">密码：<input type="password" id="sec1">
                <span style="font-size: 15px; color: rgba(0, 0, 0, 0.52);">
                    请按回车
                </span>
            </div>
            <div class="post" style="align-self: center;">再次输入：<input type="password" id="sec2">
                <span style="font-size: 15px; color: rgba(0, 0, 0, 0.52);">
                    请按回车
                </span>
            </div> 
        </div>
        <section class="dec">
            <button id="sub" class="btn">注册</button>
        </section>
    </main>
    <footer>

    </footer>
    <script>
        // var str1 = document.getElementById("email").value;
        // console.log(str1);
        let tt1,tt2,tt3;
        // tt1 = true;
        document.getElementById("email").onkeypress = function (event) {
            if(event.keyCode === 13){
                    var str1 = document.getElementById("email").value;
                    var patt1 = /^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;
                    var arr = str1.match(patt1);
                    if(!arr){
                        document.getElementById("email").value = "";
                        alert("请输入正确邮箱");
                        tt1 = false;
                    }else{
                        console.log(arr);
                        tt1 = true;
                    }
                    
            }
                    
        }
        document.getElementById("sec1").onkeypress = function (event) {
            if(event.keyCode === 13){
                var str1 = document.getElementById("sec1").value;
                var patt1 = /^(?=(.*?[A-Z]){3,})(?=.*?[a-z])(?=.*?[2-8])(?=.*?[#?!@$%^&*-]).{9,15}$/;
                var arr1 = str1.match(patt1);
                console.log(arr1);
                if(!arr1){
                    document.getElementById("sec1").value = "";
                    alert("请加强密码强度！");
                    tt2 = false;
                }else{
                    var arr2 = !str1.match(".*(.).*\\1.*");
                    console.log(arr2);
                    if(!arr2){
                        document.getElementById("sec1").value = "";
                        alert("请加强密码强度！密码长度（9~15 位）不能有重复的字符，数字要求在2~8之间，可以包含任意大小写字母，必须有三个大写字母，必须包含{#,&,*,?}四个特殊字符中的一个）。");
                        tt2 = false;
                    }else{
                        console.log("tt1="+tt1);
                        tt2 = true;
                    }
                }
            }
        }
        document.getElementById("sec2").onkeypress = function (event) {
            if(event.keyCode === 13){
                var str1 = document.getElementById("sec1").value;
                var str2 = document.getElementById("sec2").value;
                if(str1!=str2){
                    document.getElementById("sec2").value = "";
                    alert("两次密码输入不一致！");
                    tt3 = false;
                }else{
                    console.log(str2);
                    tt3 = true;
                }
               
            }
        }

        document.getElementById("sub").onclick = function () {
                if(tt1&&tt2&&tt3){
                    alert("注册成功！")
                    document.getElementById("email").value = "";
                    document.getElementById("sec1").value = "";
                    document.getElementById("sec2").value = "";
                }
                else{
                    alert("请输入注册信息！");
                }
            }
    </script>
</body>
</html>